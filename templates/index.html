<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>连词成句</title>
    <link rel="stylesheet" href="/static/css/style.css" />
    <link rel="stylesheet" href="/static/css/chat.css" />
  </head>
  <body>
    <div class="app app-single">
      <main class="main">
        <section id="guide" class="guide" aria-labelledby="guideTitle">
          <div class="guide-content">
            <!-- 顶部公告条：仅一行滚动提示 -->
            <div class="announcement-bar guide-announcement">
              <div class="marquee"><span id="marqueeNotice">公益项目 请勿攻击本站！欢迎加入交流群一起维护此项目</span></div>
            </div>
            <h1 id="guideTitle" style="text-align:center;">欢迎使用连词成句</h1>
            <p><strong>项目灵感</strong><br>
            该项目灵感源于大语言模型(LLM)的特殊能力：将不相关词汇自然融合到连贯故事中。LLM能"天马行空"地创造情境，将美国当代英语语料库（COCA）使用频率最高的前20,000个单词单词整合成生动有趣的句子，符合人类大脑的记忆规律——故事化、情境化的内容更容易被记住。项目中的每个情境句都是这种能力的体现，让学习者在阅读故事的同时，记住大量词汇。</p>
            
            <p>2个月内词汇量达到英语母语水平。无需再单独记忆<strong>四六级、考研、雅思托福、SAT、GMAT、TOEFL、GRE单词</strong>，读通200条情境句，彻底解决词汇量问题。</p>
            
            <p><strong>功能介绍：</strong></p>
            <ul>
              <li><strong>数据库：</strong>美国当代英语语料库（COCA）覆盖超过10亿词汇，从中筛选出使用频率最高的前20,000个单词，每100词配一条情境句。目前已收录122句（包括12200词），持续更新中。</li>
              <li><strong>情境句：</strong>按分段阅读示例句，点击单词可跳转查询区，支持下载全文。</li>
              <li><strong>查询区：</strong>查看单词音标与释义，方便学习。</li>
              <li><strong>智能体：</strong>填入<a href="https://siliconflow.cn/" target="_blank">硅基流动</a>的API Key，用于辅助翻译，或填入自定义提示词另作他用。</li>
            </ul>
            
            <p>有想法或建议？欢迎加入项目维护：</p>
            <p>- GitHub项目地址：<a href="https://github.com/cheraljun/Huge-Vocabulary" target="_blank">https://github.com/cheraljun/Huge-Vocabulary</a></p>
            <p>- QQ交流群：<strong>1014873476</strong></p>
            <p>- 联系作者微信：<strong>yes_smile_peace</strong></p>
            <p id="guideOnline" class="guide-online">当前在线人数：--</p>
            
            <button id="guideClose" class="guide-close" type="button">了解了，开始体验</button>
          </div>
        </section>

        <!-- 情境句视图 -->
        <div id="view-segments" class="view" aria-label="情境句视图">
          <section class="center">
            <div class="center-header"><span>情境句</span><button id="copyAllBtn" class="btn-copy">下载全文</button></div>
            <div id="content" class="center-body"></div>
          </section>
        </div>

        <!-- 数据库视图 -->
        <div id="view-database" class="view" aria-label="词库视图">
          <div class="section">
            <div class="section-title">选择情境句载入</div>
            <div id="txtList" class="list"></div>
          </div>
          <div class="section">
            <div class="section-title">数据库状态</div>
            <div id="excelFiles" class="list"></div>
          </div>
        </div>

        <!-- 查询区视图 -->
        <div id="view-lookup" class="view" aria-label="查询区视图">
          <div class="lookup">
            <div class="chat-header">查询区</div>
            <div id="lookupBody" class="lookup-body"></div>
          </div>
        </div>

        <!-- 智能体视图 -->
        <div id="view-ai" class="view" aria-label="智能体视图">
          <div class="ai">
            <div class="chat-header">
              <div class="chat-title">智能体</div>
              <div class="ai-toolbar" role="group" aria-label="对话设置">
                <label class="sr-only" for="aiModel">对话模型</label>
                <select id="aiModel" title="对话模型"></select>
                <label class="sr-only" for="aiSystem">系统提示词</label>
                <input id="aiSystem" type="text" placeholder="系统提示词（可选）" />
                <div class="ai-key-field">
                  <label class="sr-only" for="aiKey">API Key</label>
                  <input id="aiKey" type="password" placeholder="硅基流动 API Key" autocomplete="off" />
                  <button type="button" id="aiKeyToggle" class="btn-icon" aria-label="切换 API Key 可见性">显示</button>
                </div>
              </div>
            </div>
            <div id="aiList" class="ai-list" role="log" aria-live="polite" aria-relevant="additions"></div>
            <form id="aiComposerForm" class="ai-composer" novalidate>
              <label class="sr-only" for="aiInput">发送内容</label>
              <textarea id="aiInput" rows="1" placeholder="请输入内容" required></textarea>
              <button type="submit" id="aiSend" class="btn-primary">发送</button>
            </form>
          </div>
        </div>

        <!-- 聊天室视图 -->
        <div id="view-chat" class="view" aria-label="聊天室视图">
          <div class="container">
            <div class="login-section" id="login-section" style="display:flex; align-items:center; justify-content:center;">
              <div style="display:flex; flex-direction:column; align-items:center; gap:12px; text-align:center;">
                <div style="font-size: 1rem; color:#111;">进入聊天室，请文明聊天</div>
                <button id="login-btn" style="background:var(--blue); color:#fff; padding:8px 14px; border:none; border-radius:6px; cursor:pointer; font-size:14px;">我已知晓，确认进入</button>
              </div>
              <input type="text" id="nick" maxlength="10" style="display:none;" />
            </div>

            <div class="chat-container" style="display:none;">
              <div class="chat-box" id="chat-box"></div>
              <div class="input-section" id="chat-section" style="display:none">
                <textarea id="msg" rows="1" placeholder="输入消息..."></textarea>
                <input type="file" id="file-input" style="display: none;" multiple accept="image/*,audio/*,video/*,.pdf,.doc,.docx,.txt,.zip,.rar">
                <button id="upload-btn" class="upload-btn" title="上传文件或图片">+</button>
                <button id="send-btn" class="send-btn">发</button>
              </div>
            </div>
          </div>

          <!-- 图片模态框 -->
          <div id="image-modal" class="image-modal" onclick="closeImageModal()">
            <div class="image-modal-content">
              <img id="modal-image" src="" alt="查看图片" onclick="closeImageModal()">
            </div>
          </div>

          <!-- 头像菜单（已移除私聊入口） -->
          <div id="avatar-menu" class="avatar-menu">
            <div class="avatar-menu-item mention" data-action="mention">@ 提及用户</div>
          </div>
        </div>
      </main>

      <nav class="bottom-nav" role="tablist" aria-label="主导航">
        <button class="tab" data-view="database" role="tab" aria-selected="false">数据库</button>
        <button class="tab" data-view="segments" role="tab" aria-selected="false">情境句</button>
        <button class="tab" data-view="lookup" role="tab" aria-selected="false">查询区</button>
        <button class="tab" data-view="ai" role="tab" aria-selected="false">智能体</button>
        <button class="tab" data-view="chat" role="tab" aria-selected="false">聊天室</button>
      </nav>
    </div>

    <script type="module" src="/static/js/main.js"></script>
    <script src="/static/js/jquery.min.js"></script>
    <script src="/static/js/chatroom.js"></script>
  </body>
</html>